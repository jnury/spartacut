<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:SpartaCut.Core.ViewModels"
             xmlns:icons="using:Material.Icons.Avalonia"
             x:Class="SpartaCut.Controls.PlayerControlsOverlay"
             x:DataType="vm:MainWindowViewModel"
             x:CompileBindings="False">

    <!-- Player Controls Bar -->
    <Border Height="48"
            Background="Transparent"
            Name="ControlsContainer">
        <Grid Margin="12" VerticalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/> <!-- Play/Pause -->
                <ColumnDefinition Width="Auto"/> <!-- Stop -->
                <ColumnDefinition Width="Auto"/> <!-- Skip Back -->
                <ColumnDefinition Width="Auto"/> <!-- Skip Forward -->
                <ColumnDefinition Width="*"/>    <!-- Spacer -->
                <ColumnDefinition Width="Auto"/> <!-- Timecode -->
                <ColumnDefinition Width="Auto"/> <!-- Mute -->
                <ColumnDefinition Width="Auto"/> <!-- Volume Slider -->
            </Grid.ColumnDefinitions>

            <Grid.Styles>
                <!-- Consistent button style matching timeline trash icon -->
                <Style Selector="Button.player-control">
                    <Setter Property="Width" Value="36"/>
                    <Setter Property="Height" Value="36"/>
                    <Setter Property="Background" Value="#888888"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="CornerRadius" Value="4"/>
                    <Setter Property="Padding" Value="0"/>
                </Style>
                <Style Selector="Button.player-control:pointerover /template/ ContentPresenter">
                    <Setter Property="Background" Value="#D7641C"/>
                </Style>

                <!-- Volume slider styling -->
                <Style Selector="Slider.volume-slider /template/ Thumb">
                    <Setter Property="Background" Value="Black"/>
                </Style>
                <Style Selector="Border.volume-container:pointerover Slider.volume-slider /template/ Thumb">
                    <Setter Property="Background" Value="#D7641C"/>
                </Style>
            </Grid.Styles>

            <!-- Play/Pause Button -->
            <Button Grid.Column="0"
                    Classes="player-control"
                    Margin="0,0,4,0"
                    Command="{Binding PlayCommand}"
                    IsVisible="{Binding !IsPlaying}"
                    ToolTip.Tip="Play">
                <icons:MaterialIcon Kind="Play" Width="20" Height="20" Foreground="Black"/>
            </Button>

            <Button Grid.Column="0"
                    Classes="player-control"
                    Margin="0,0,4,0"
                    Command="{Binding PauseCommand}"
                    IsVisible="{Binding IsPlaying}"
                    ToolTip.Tip="Pause">
                <icons:MaterialIcon Kind="Pause" Width="20" Height="20" Foreground="Black"/>
            </Button>

            <!-- Stop Button -->
            <Button Grid.Column="1"
                    Classes="player-control"
                    Margin="0,0,4,0"
                    Command="{Binding StopCommand}"
                    ToolTip.Tip="Stop">
                <icons:MaterialIcon Kind="Stop" Width="20" Height="20" Foreground="Black"/>
            </Button>

            <!-- Skip Back 10s -->
            <Button Grid.Column="2"
                    Classes="player-control"
                    Margin="0,0,4,0"
                    Command="{Binding Skip10SecondsBackwardCommand}"
                    ToolTip.Tip="Skip 10s Back">
                <icons:MaterialIcon Kind="Undo" Width="20" Height="20" Foreground="Black"/>
            </Button>

            <!-- Skip Forward 10s -->
            <Button Grid.Column="3"
                    Classes="player-control"
                    Margin="0,0,4,0"
                    Command="{Binding Skip10SecondsForwardCommand}"
                    ToolTip.Tip="Skip 10s Forward">
                <icons:MaterialIcon Kind="Redo" Width="20" Height="20" Foreground="Black"/>
            </Button>

            <!-- Timecode Display -->
            <Border Grid.Column="5"
                    Background="#888888"
                    CornerRadius="4"
                    Height="36"
                    Margin="0,0,12,0"
                    VerticalAlignment="Center">
                <TextBlock Text="{Binding CurrentTimeDisplay}"
                           FontFamily="Consolas,Courier New,monospace"
                           FontSize="13"
                           Foreground="Black"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Margin="8,0"/>
            </Border>

            <!-- Mute Button -->
            <Button Grid.Column="6"
                    Classes="player-control"
                    Margin="0,0,4,0"
                    Command="{Binding ToggleMuteCommand}"
                    ToolTip.Tip="Mute/Unmute">
                <icons:MaterialIcon Kind="{Binding IsMuted, Converter={StaticResource MuteIconConverter}}"
                                    Width="20" Height="20" Foreground="Black"/>
            </Button>

            <!-- Volume Slider -->
            <Border Grid.Column="7"
                    Classes="volume-container"
                    Background="#888888"
                    CornerRadius="4"
                    Height="36"
                    VerticalAlignment="Center">
                <Slider Classes="volume-slider"
                        Width="100"
                        Minimum="0"
                        Maximum="1"
                        Value="{Binding Volume, Mode=TwoWay}"
                        VerticalAlignment="Center"/>
            </Border>
        </Grid>
    </Border>
</UserControl>
